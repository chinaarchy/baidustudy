<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>day25_part2</title>
</head>
<body>
<select id="year-select">
    <option value="2000">2000</option>
    <option value="2001">2001</option>
    <option value="2002">2002</option>
    <option value="2003">2003</option>
    <option value="2004">2004</option>
    <option value="2005">2005</option>
    <option value="2006">2006</option>
    <option value="2007">2007</option>
    <option value="2008">2008</option>
    <option value="2009">2009</option>
    <option value="2010">2010</option>
    <option value="2011">2011</option>
    <option value="2012">2012</option>
    <option value="2013">2013</option>
    <option value="2014">2014</option>
    <option value="2015">2015</option>
    <option value="2016">2016</option>
    <option value="2017">2017</option>
    <option value="2018">2018</option>
    <option value="2019">2019</option>
    <option value="2020">2020</option>
    <option value="2021">2021</option>
    <option value="2022">2022</option>
    <option value="2023">2023</option>
    <option value="2024">2024</option>
    <option value="2025">2025</option>
    <option value="2026">2026</option>
    <option value="2027">2027</option>
    <option value="2028">2028</option>
    <option value="2029">2029</option>
</select>

<select id="month-select">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
</select>

<select id="day-select">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option id="run" value="29">29</option>
    <option id = "ping" value="30">30</option>
    <option id="normal" value="31">31</option>
</select>

<select id="hour-select">
    <option value="0">00</option>
    <option value="1">01</option>
    <option value="2">02</option>
    <option value="3">03</option>
    <option value="4">04</option>
    <option value="5">05</option>
    <option value="6">06</option>
    <option value="7">07</option>
    <option value="8">08</option>
    <option value="9">09</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
</select>

<select id="minite-select">
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
    <option value="32">32</option>
    <option value="33">33</option>
    <option value="34">34</option>
    <option value="35">35</option>
    <option value="36">36</option>
    <option value="37">37</option>
    <option value="38">38</option>
    <option value="39">39</option>
    <option value="40">40</option>
    <option value="41">41</option>
    <option value="42">42</option>
    <option value="43">43</option>
    <option value="44">44</option>
    <option value="45">45</option>
    <option value="46">46</option>
    <option value="47">47</option>
    <option value="48">48</option>
    <option value="49">49</option>
    <option value="50">50</option>
    <option value="51">51</option>
    <option value="52">52</option>
    <option value="53">53</option>
    <option value="54">54</option>
    <option value="55">55</option>
    <option value="56">56</option>
    <option value="57">57</option>
    <option value="58">58</option>
    <option value="59">59</option>
</select>

<select id="second-select">

    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
    <option value="32">32</option>
    <option value="33">33</option>
    <option value="34">34</option>
    <option value="35">35</option>
    <option value="36">36</option>
    <option value="37">37</option>
    <option value="38">38</option>
    <option value="39">39</option>
    <option value="40">40</option>
    <option value="41">41</option>
    <option value="42">42</option>
    <option value="43">43</option>
    <option value="44">44</option>
    <option value="45">45</option>
    <option value="46">46</option>
    <option value="47">47</option>
    <option value="48">48</option>
    <option value="49">49</option>
    <option value="50">50</option>
    <option value="51">51</option>
    <option value="52">52</option>
    <option value="53">53</option>
    <option value="54">54</option>
    <option value="55">55</option>
    <option value="56">56</option>
    <option value="57">57</option>
    <option value="58">58</option>
    <option value="59">59</option>
</select>

<p id="result-wrapper"></p>
<script>
    var yearSelect = document.getElementById('year-select')
    var monthSelect = document.getElementById('month-select')
    var dateSelect = document.getElementById('day-select')
    var hourSelect = document.getElementById('hour-select')
    var miniteSelect = document.getElementById('minite-select')
    var secondSelect = document.getElementById('second-select')
    var pResult = document.getElementById('result-wrapper')
    //添加事件监听
    yearSelect.addEventListener('change',function () {
        ReSizeTime()
        GetResult()
    })
    monthSelect.addEventListener('change',function () {
        ReSizeTime()
        GetResult()
    })
    dateSelect.addEventListener('change',function () {
        GetResult()
    })
    hourSelect.addEventListener('change',function () {
        GetResult()
    })
    miniteSelect.addEventListener('change',function () {
        GetResult()
    })
    secondSelect.addEventListener('change',function () {
        GetResult()
    })
    //不同月份设置不同的日期总数
    var ReSizeTime = function () {
        var year = parseInt(yearSelect.value)
        var month = parseInt(monthSelect.value)
        if(month == 1||month == 3||month == 5||month == 7||month == 8||month == 10 || month == 12){
            dateSelect.length = 31
        }else if(month == 4||month == 6||month == 9 ||month == 11){
            dateSelect.length = 30
        }else{
            if((year % 4 == 0&&year % 100 != 0)||year % 400 == 0){
                dateSelect.length = 29
            }
            else{
                dateSelect.length = 28
            }
        }
    }
    //刷新结果
    var GetResult = function () {
        var getTime = new Date(parseInt(yearSelect.value),parseInt(monthSelect.value - 1),parseInt(dateSelect.value),parseInt(hourSelect.value),parseInt(miniteSelect.value),parseInt(secondSelect.value))
        var getNow = new Date()
        if(getTime - getNow > 0){
            var result =  CalculateTime(getTime - getNow)
            pResult.innerText = `现在距离 ${getTime.getFullYear()}年${getTime.getMonth() + 1}月${getTime.getDate()}日星期${GetWeek(getTime.getDay())} ${getTime.getHours()}:${getTime.getMinutes()}:${getTime.getSeconds()} 还有 ${result[0]}天 ${result[1]} 小时 ${result[2]} 分 ${result[3]} 秒`
        }
           else{
            var result = CalculateTime(getTime - getNow)
            pResult.innerText = `现在距离 ${getTime.getFullYear()}年${getTime.getMonth() + 1}月${getTime.getDate()}日星期${GetWeek(getTime.getDay())} ${getTime.getHours()}:${getTime.getMinutes()}:${getTime.getSeconds()} 已经过去 ${result[0]}天 ${result[1]} 小时 ${result[2]} 分 ${result[3]} 秒`

        }
    }
    var CalculateTime = function (num) {
        var betweenNum = Math.abs(num) / 1000
        var result = []
        if (betweenNum > 1){
            result[3] = parseInt(betweenNum % 60)
            betweenNum /= 60
            if (betweenNum > 1){
                result[2] = parseInt(betweenNum % 60)
                betweenNum /= 60
                if (betweenNum > 1){
                    result[1] = parseInt(betweenNum % 24)
                    betweenNum /= 24
                    if (betweenNum > 1){
                        result[0] = parseInt(betweenNum)
                    } else{
                        result[0] = 0
                    }
                } else {
                    result[0] = 0
                    result[1] = 0
                }
            }else {
                result[0] = 0
                result[1] = 0
                result[2] = 0
            }
        } else {
            result[0] = 0
            result[1] = 0
            result[2] = 0
            result[3] = 0
        }
        return result
    }
    //得到星期
    var GetWeek = function (day) {
        var weekList = new Array('日','一','二','三','四','五','六')
        return weekList[day]
    }
</script>
</body>
</html>
